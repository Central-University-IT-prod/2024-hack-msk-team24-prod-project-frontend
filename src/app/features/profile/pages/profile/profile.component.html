<div class="container">
  <div class="content">

    <div class="card">
      <img src="./card.jpeg">
      <p class="card-number" [class.active]="chosenLabel === 'number'" [innerHTML]="convertCardNumber()"></p>
      <div class="card-data">
        <p class="card-date" [class.active]="chosenLabel === 'date'">{{displayDate()}}</p>
        <p class="card-cvv" [class.active]="chosenLabel === 'CVV'">{{ displayCVV() }}</p>
      </div>
    </div>

    <div class="form">
      <div class="label">
        <p>Card Number</p>
        <label (focusin)="chosenLabel='number'">
          <svg width="18" height="18" viewBox="0 0 24 18" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M0 3C0 2.20435 0.316071 1.44129 0.87868 0.87868C1.44129 0.31607 2.20435 0 3 0H21C21.7956 0 22.5587 0.31607 23.1213 0.87868C23.6839 1.44129 24 2.20435 24 3V10.5H0V3ZM17.25 4.5C17.0511 4.5 16.8603 4.57902 16.7197 4.71967C16.579 4.86032 16.5 5.05109 16.5 5.25V6.75C16.5 6.94891 16.579 7.13968 16.7197 7.28033C16.8603 7.42098 17.0511 7.5 17.25 7.5H20.25C20.4489 7.5 20.6397 7.42098 20.7803 7.28033C20.921 7.13968 21 6.94891 21 6.75V5.25C21 5.05109 20.921 4.86032 20.7803 4.71967C20.6397 4.57902 20.4489 4.5 20.25 4.5H17.25Z"/>
            <path d="M0 13.5V15C0 15.7956 0.316071 16.5587 0.87868 17.1213C1.44129 17.6839 2.20435 18 3 18H21C21.7956 18 22.5587 17.6839 23.1213 17.1213C23.6839 16.5587 24 15.7956 24 15V13.5H0Z"/>
          </svg>

          <input name="card number" type="number" maxlength="16" (input)="cardNumberInput($event)" placeholder="Enter your Card Number">
        </label>
      </div>

      <div class="flex flex-row">
        <div class="label">
          <p>Card Month</p>

          <select [(ngModel)]="chosenMonth" (focusin)="chosenLabel = 'CVV'">
            @for (month of months; track months; let index = $index) {
              <option>{{month}}</option>
            }
          </select>
        </div>

        <div class="label">
          <p>Card Year</p>
          <select [(ngModel)]="chosenYear" (focusin)="chosenLabel = 'CVV'">
            @for (year of years; track years; let index = $index) {
              <option>{{year}}</option>
            }
          </select>
        </div>
      </div>

      @if (error) {
        <div class="error-container">
          <p>Ошибка</p>
          <p>{{error}}</p>
        </div>
      }

      <button (click)="confirm()" class="solid-button btn">
        <p>Привязать</p>
        <svg width="33" height="11" viewBox="0 0 33 11" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1.83334 5.5L31.1667 5.5M31.1667 5.5L27.1667 1.5M31.1667 5.5L27.1667 9.5" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>

    </div>

  </div>
</div>
